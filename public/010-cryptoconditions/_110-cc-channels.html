<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Smart Contract: Channels | Komodo Developer Documentation</title>
    <meta name="description" content="Documentation for developers building on Komodo">
    
    
    <link rel="preload" href="/komodo-docs-vuepress/assets/css/0.styles.5978d221.css" as="style"><link rel="preload" href="/komodo-docs-vuepress/assets/js/app.98eba040.js" as="script"><link rel="preload" href="/komodo-docs-vuepress/assets/js/11.726a5c6f.js" as="script"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/10.fa46c12f.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/12.7addabd9.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/13.534e5eab.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/14.0559a178.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/15.dffcdf7f.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/16.7a650e46.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/17.3f20971f.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/18.7f8ee2ce.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/19.de14fddf.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/2.a3ae82a5.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/20.7c7a0ec4.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/21.c12abd42.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/22.ece0e705.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/23.53f9345e.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/24.c662a9ee.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/25.090afdcb.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/26.4d5afbf3.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/27.1d434e56.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/28.fc6d6dbd.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/29.fcbd228c.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/3.e79f4ad4.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/30.545998a0.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/4.94a2876e.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/5.f9b44f50.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/6.6ff6b9c0.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/7.8eca54e4.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/8.0ac769f5.js"><link rel="prefetch" href="/komodo-docs-vuepress/assets/js/9.537f8c75.js">
    <link rel="stylesheet" href="/komodo-docs-vuepress/assets/css/0.styles.5978d221.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/komodo-docs-vuepress/" class="home-link router-link-active"><!----> <span class="site-name">Komodo Developer Documentation</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/komodo-docs-vuepress/000-start-here/_001-introduction.html" class="nav-link">Start Here</a></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/komodo-docs-vuepress/000-start-here/_001-introduction.html" class="nav-link">Start Here</a></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Start Here</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Installation and Setup</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>CryptoConditions (Smart Contract Templates)</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/komodo-docs-vuepress/010-cryptoconditions/_101-cryptoconditions-instructions.html" class="sidebar-link">Instructions for CryptoConditions</a></li><li><a href="/komodo-docs-vuepress/010-cryptoconditions/_110-cc-channels.html" class="active sidebar-link">Channels</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/komodo-docs-vuepress/010-cryptoconditions/_110-cc-channels.html#channelsclose" class="sidebar-link">channelsclose</a></li><li class="sidebar-sub-header"><a href="/komodo-docs-vuepress/010-cryptoconditions/_110-cc-channels.html#channelsinfo" class="sidebar-link">channelsinfo</a></li><li class="sidebar-sub-header"><a href="/komodo-docs-vuepress/010-cryptoconditions/_110-cc-channels.html#channelsopen" class="sidebar-link">channelsopen</a></li><li class="sidebar-sub-header"><a href="/komodo-docs-vuepress/010-cryptoconditions/_110-cc-channels.html#channelspayment" class="sidebar-link">channelspayment</a></li><li class="sidebar-sub-header"><a href="/komodo-docs-vuepress/010-cryptoconditions/_110-cc-channels.html#channelsrefund" class="sidebar-link">channelsrefund</a></li></ul></li><li><a href="/komodo-docs-vuepress/010-cryptoconditions/_120-cc-dice.html" class="sidebar-link">Dice</a></li><li><a href="/komodo-docs-vuepress/010-cryptoconditions/_130-cc-faucet.html" class="sidebar-link">Faucet</a></li><li><a href="/komodo-docs-vuepress/010-cryptoconditions/_133-cc-gateways.html" class="sidebar-link">Gateways</a></li><li><a href="/komodo-docs-vuepress/010-cryptoconditions/_135-cc-oracles.html" class="sidebar-link">Oracles</a></li><li><a href="/komodo-docs-vuepress/010-cryptoconditions/_140-cc-rewards.html" class="sidebar-link">Rewards</a></li><li><a href="/komodo-docs-vuepress/010-cryptoconditions/_150-cc-tokens.html" class="sidebar-link">Tokens</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Essential RPC Calls</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="smart-contract-channels"><a href="#smart-contract-channels" aria-hidden="true" class="header-anchor">#</a> Smart Contract: Channels</h1> <p>The <code>channels</code> CryptoConditions smart contract facilitates instant payments in a trustless environment.</p> <p>When a payment is executed properly with <code>channels</code>, as soon as it enters the mempool the odds that the payment can be withdrawn or attacked decrease to almost zero. Many developers and users may find it advantageous to use <code>channels</code> to create a secure instant-payment network that can be used within their business environment.</p> <p>The flow of a <code>channels</code> contract is as follows:</p> <ul><li>Anyone can create a channel using <a href="#channelsopen"><code>channelsopen</code></a> <ul><li>When creating the channel, the user indicates the number and size of their potential payment(s), and what their destination is</li></ul></li> <li>Once the channel is notarized, at any time in the future the user can execute <a href="#channelspayment"><code>channelspayment</code></a> to release a specific amount of their available payments
<ul><li>As soon as the <code>channelspayment</code> result enters the mempool, the odds of withdrawing the <code>txid</code> from processing decrease to almost zero</li></ul></li> <li>The creator of a channel may close the channel at any time using <a href="#channelsclose"><code>channelsclose</code></a> <ul><li>This shows the receiver that this payment stream is permanently ended</li></ul></li> <li>Once the channel's closure is notarized, the creator may withdraw remaining funds using <a href="#channelsrefund"><code>channelsrefund</code></a></li> <li>The <a href="#channelsinfo"><code>channelsinfo</code></a> method reveals public information for any or all available channels on an asset chain</li></ul> <h2 id="channelsclose"><a href="#channelsclose" aria-hidden="true" class="header-anchor">#</a> channelsclose</h2> <p><strong>channelsclose open_txid</strong></p> <p>The <code>channelsclose</code> method marks a specific channel as closed, meaning that no additional payments will be added to the channel.</p> <p>The owner of the <code>channel</code> may still execute <a href="#channelspayment"><code>channelspayment</code></a> for any remaining payments in the channel, until all payments are used or withdrawn.</p> <p>The method returns a hex value which must then be broadcast using the <a href="#sendrawtransaction"><code>sendrawtransaction</code></a> method.</p> <p>The <code>sendrawtransaction</code> method then returns a <code>txid</code> which is used in the <a href="#channelsrefund"><code>channelsrefund</code></a> method to reclaim funds.</p> <h3 id="arguments"><a href="#arguments" aria-hidden="true" class="header-anchor">#</a> Arguments:</h3> <table><thead><tr><th>Structure</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>open_txid</td> <td>(string)</td> <td>the unique identifying txid that is created when a channel is first opened</td></tr></tbody></table> <h3 id="response"><a href="#response" aria-hidden="true" class="header-anchor">#</a> Response:</h3> <table><thead><tr><th>Structure</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>result:</td> <td>(string)</td> <td>whether the command succeeded</td></tr> <tr><td>hex:</td> <td>(string)</td> <td>a raw transaction in hex-encoded format; you must broadcast this transaction to complete the command</td></tr></tbody></table> <h3 id="examples"><a href="#examples" aria-hidden="true" class="header-anchor">#</a> Examples:</h3> <blockquote><p>Step 1: Close a channel</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>./komodo-cli -ac_name=HELLOWORLD channelsclose 2f95b0f4e3dbe7f5ebc0f9479800c9ff3f44e76f5378313c9406ab5a92ff4631
</code></pre></div><blockquote><p>Output from Step 1</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&quot;channelsclose output:
{
  &quot;result&quot;: &quot;success&quot;,
  &quot;hex&quot;: &quot;010000000337bc987132bc04b527260b1243d2c6ec3bcf2ce79dff33542ed665bf428a00360400000049483045022100dacf03fc670dfcedff732374e5dfde63668c8f1bb036076a185d620f84cdbefe02206d5c7af679e42bc35d02d97a1809ea9eba48392409be0ddf6172a76469cb9b3601ffffffff37bc987132bc04b527260b1243d2c6ec3bcf2ce79dff33542ed665bf428a003600000000a74ca5a281a1a0819ca28194a067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272814024c8da3b4a5e9595a360e4b3b44e86aa6627df774fd554ee7e55536dae7bd7af452410e6a827b1f14f63643d6cbf48a1336dde0c26d2e2e249dd9cc4aa9f044da129a5278020e73e4b0745bdf31657ac09e3cf99fd65cb262d8498f86c977ece01b551925f028103020000af038001eba10001ffffffff37bc987132bc04b527260b1243d2c6ec3bcf2ce79dff33542ed665bf428a0036010000007b4c79a276a072a26ba067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba012728140decb986f860f6b67fa458e89c50b90ebef048a72a4bfb0bb0cc8c39a5f0fc8763fdc49780154d56a89be1a7b54d17b5a9c1489c6c2b0feb11c921f75d5e8f1b7a100af038001eba10001ffffffff050087930300000000302ea22c80206dafed6d15c24a9a60f01d5972ee08aeb40ba7849d9af3608e97397364ee16a281031210008203000401cc1027000000000000302ea22c8020c9ada2adfc6c6dec0bd9dd29f4e48c86f84c016abc3552b8815ca3c4a44c561b8103120c008203000401cc1027000000000000302ea22c802019be575785c322e9c7d2ae4b5f3df78c9a38ff7357e9e689f26de8e224cb186c8103120c008203000401cca0ad96a60100000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac0000000000000000956a4c92eb433146ff925aab06943c3178536fe7443fffc9009847f9c0ebf5e7dbe3f4b0952f210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127221027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4060000008096980000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;
}
</code></pre></div><blockquote><p>Step 2: Broadcast the raw transaction using sendrawtransaction</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>./komodo-cli -ac_name=HELLOWORLD sendrawtransaction 010000000337bc987132bc04b527260b1243d2c6ec3bcf2ce79dff33542ed665bf428a00360400000049483045022100dacf03fc670dfcedff732374e5dfde63668c8f1bb036076a185d620f84cdbefe02206d5c7af679e42bc35d02d97a1809ea9eba48392409be0ddf6172a76469cb9b3601ffffffff37bc987132bc04b527260b1243d2c6ec3bcf2ce79dff33542ed665bf428a003600000000a74ca5a281a1a0819ca28194a067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272814024c8da3b4a5e9595a360e4b3b44e86aa6627df774fd554ee7e55536dae7bd7af452410e6a827b1f14f63643d6cbf48a1336dde0c26d2e2e249dd9cc4aa9f044da129a5278020e73e4b0745bdf31657ac09e3cf99fd65cb262d8498f86c977ece01b551925f028103020000af038001eba10001ffffffff37bc987132bc04b527260b1243d2c6ec3bcf2ce79dff33542ed665bf428a0036010000007b4c79a276a072a26ba067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba012728140decb986f860f6b67fa458e89c50b90ebef048a72a4bfb0bb0cc8c39a5f0fc8763fdc49780154d56a89be1a7b54d17b5a9c1489c6c2b0feb11c921f75d5e8f1b7a100af038001eba10001ffffffff050087930300000000302ea22c80206dafed6d15c24a9a60f01d5972ee08aeb40ba7849d9af3608e97397364ee16a281031210008203000401cc1027000000000000302ea22c8020c9ada2adfc6c6dec0bd9dd29f4e48c86f84c016abc3552b8815ca3c4a44c561b8103120c008203000401cc1027000000000000302ea22c802019be575785c322e9c7d2ae4b5f3df78c9a38ff7357e9e689f26de8e224cb186c8103120c008203000401cca0ad96a60100000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac0000000000000000956a4c92eb433146ff925aab06943c3178536fe7443fffc9009847f9c0ebf5e7dbe3f4b0952f210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127221027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4060000008096980000000000000000000000000000000000000000000000000000000000000000000000000000000000
</code></pre></div><blockquote><p>Response from Step 2: (Save this txid to reclaim your funds using channelsrefund)</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>2079c46cd9f3970f9fd73d8022bf6f30aaf5031bf877d2c541c4c0df1dea1be5
</code></pre></div><h2 id="channelsinfo"><a href="#channelsinfo" aria-hidden="true" class="header-anchor">#</a> channelsinfo</h2> <p><strong>channelsinfo (open_tx_id)</strong></p> <p>The <code>channelsinfo</code> method fetches info about channels that are relevant to the user, either as sender or receiver.</p> <p>If no <code>open_tx_id</code> argument is included, the method returns a list of all channels available to this user.</p> <h3 id="arguments-2"><a href="#arguments-2" aria-hidden="true" class="header-anchor">#</a> Arguments:</h3> <table><thead><tr><th>Structure</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>open_txid</td> <td>(string)</td> <td>the unique identifying txid that is created when a channel is first opened</td></tr></tbody></table> <h3 id="response-2"><a href="#response-2" aria-hidden="true" class="header-anchor">#</a> Response:</h3> <table><thead><tr><th>Structure</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>{</td> <td></td> <td></td></tr> <tr><td>result</td> <td>(string)</td> <td>whether the command executed successfully</td></tr> <tr><td>name</td> <td>(string)</td> <td>name of the channel</td></tr> <tr><td>Open:</td> <td>(string)</td> <td>a channel and its relevant information: address of the destination pubkey, number of payments, denomination per payment, and the channel open_tx_id</td></tr> <tr><td>}</td> <td></td> <td></td></tr></tbody></table> <h3 id="examples-2"><a href="#examples-2" aria-hidden="true" class="header-anchor">#</a> Examples:</h3> <blockquote><p>Command</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>./komodo-cli -ac_name=HELLOWORLD channelsinfo
</code></pre></div><blockquote><p>Response:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;result&quot;: &quot;success&quot;,
  &quot;name&quot;: &quot;Channel RKgkZ3RybqGHBXBhDoeM4cu7hBLD8UgHBW&quot;,
  &quot;Open&quot;: &quot;20 payments of 30000 satoshi&quot;
}
</code></pre></div><blockquote><p>Command</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>./komodo-cli -ac_name=HELLOWORLD channelsinfo
</code></pre></div><blockquote><p>Response:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;result&quot;: &quot;success&quot;,
  &quot;name&quot;: &quot;Channel RKgkZ3RybqGHBXBhDoeM4cu7hBLD8UgHBW&quot;,
  &quot;Open&quot;: &quot;20 payments of 30000 satoshi&quot;,
  &quot;Payment&quot;: &quot;60000 satoshi to RBvjFvWJ43f8mcMCUE2MNamoRzc7KtDvn2, 18 payments left&quot;,
  &quot;Payment&quot;: &quot;30000 satoshi to RBvjFvWJ43f8mcMCUE2MNamoRzc7KtDvn2, 17 payments left&quot;
}
</code></pre></div><h2 id="channelsopen"><a href="#channelsopen" aria-hidden="true" class="header-anchor">#</a> channelsopen</h2> <p><strong>channelsopen destination_pubkey total_number_of_payments payment_size</strong></p> <p>The <code>channelsopen</code> method opens a channel between two public keys (sender and receiver).</p> <p>The method returns a hex value which must then be broadcast using the <a href="#sendrawtransaction"><code>sendrawtransaction</code></a> method.</p> <p>The <code>sendrawtransaction</code> method then returns a <code>txid</code> which is the unique identifying <code>channels_tx_id</code>.</p> <h3 id="arguments-3"><a href="#arguments-3" aria-hidden="true" class="header-anchor">#</a> Arguments:</h3> <table><thead><tr><th>Structure</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>destination_pubkey</td> <td>(string)</td> <td>the public key of the intended recipient of the channel</td></tr> <tr><td>total_number_of_payments</td> <td>(number)</td> <td>the total number of payments to allocate in the channel</td></tr> <tr><td>payment_size</td> <td>(number)</td> <td>the amount per payment, given in satoshis</td></tr></tbody></table> <h3 id="response-3"><a href="#response-3" aria-hidden="true" class="header-anchor">#</a> Response:</h3> <table><thead><tr><th>Structure</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>result:</td> <td>(string)</td> <td>whether the command succeeded</td></tr> <tr><td>hex:</td> <td>(string)</td> <td>a raw transaction in hex-encoded format; you must broadcast this transaction to complete the command</td></tr></tbody></table> <h3 id="examples-3"><a href="#examples-3" aria-hidden="true" class="header-anchor">#</a> Examples:</h3> <blockquote><p>Step 1: Create the raw hex</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>./komodo-cli -ac_name=HELLOWORLD channelsopen 027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4 10 10000000
</code></pre></div><blockquote><p>Response:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;result&quot;: &quot;success&quot;,
  &quot;hex&quot;: &quot;01000000016ee478b8470aee10aa95878bf306f853406993f953703b47fd373eba9ee7659d030000004847304402201267b68487060b6d80a0e8529271cf203f1a018c2caa508e5bdf798cd2f9099802202553dca29335f4fa491d117f5a268027b738b65b6d0945f892896775d98ae95b01ffffffff0500e1f50500000000302ea22c80206dafed6d15c24a9a60f01d5972ee08aeb40ba7849d9af3608e97397364ee16a281031210008203000401cc1027000000000000302ea22c8020c9ada2adfc6c6dec0bd9dd29f4e48c86f84c016abc3552b8815ca3c4a44c561b8103120c008203000401cc1027000000000000302ea22c802019be575785c322e9c7d2ae4b5f3df78c9a38ff7357e9e689f26de8e224cb186c8103120c008203000401cc20e697a60100000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac0000000000000000956a4c92eb4f0000000000000000000000000000000000000000000000000000000000000000210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127221027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a40a0000008096980000000000b0a3ff942c0de4972a3bbdc90f1a2851bc498f3c947cbf0d9524ccae118f515b00000000&quot;
}
</code></pre></div><blockquote><p>Step 2: Broadcast the hex using sendrawtransaction</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>./komodo-cli -ac_name=HELLOWORLD sendrawtransaction 01000000016ee478b8470aee10aa95878bf306f853406993f953703b47fd373eba9ee7659d030000004847304402201267b68487060b6d80a0e8529271cf203f1a018c2caa508e5bdf798cd2f9099802202553dca29335f4fa491d117f5a268027b738b65b6d0945f892896775d98ae95b01ffffffff0500e1f50500000000302ea22c80206dafed6d15c24a9a60f01d5972ee08aeb40ba7849d9af3608e97397364ee16a281031210008203000401cc1027000000000000302ea22c8020c9ada2adfc6c6dec0bd9dd29f4e48c86f84c016abc3552b8815ca3c4a44c561b8103120c008203000401cc1027000000000000302ea22c802019be575785c322e9c7d2ae4b5f3df78c9a38ff7357e9e689f26de8e224cb186c8103120c008203000401cc20e697a60100000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac0000000000000000956a4c92eb4f0000000000000000000000000000000000000000000000000000000000000000210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127221027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a40a0000008096980000000000b0a3ff942c0de4972a3bbdc90f1a2851bc498f3c947cbf0d9524ccae118f515b00000000
</code></pre></div><blockquote><p>Response from Step 2 (this is the unique identifying channel_tx_id):</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>2f95b0f4e3dbe7f5ebc0f9479800c9ff3f44e76f5378313c9406ab5a92ff4631
</code></pre></div><h2 id="channelspayment"><a href="#channelspayment" aria-hidden="true" class="header-anchor">#</a> channelspayment</h2> <p><strong>channelspayment open_tx_id payment_amount (secret)</strong></p> <p>The <code>channelspayment</code> method sends a payment in a channel to the receiver.</p> <p>The method requires that the channel <code>open_tx_id</code> has either one notarization or 60 confirmations.</p> <p>The owner of a channel reveals the password of a unique payment <code>txid</code> as a part of the payment. This password is intentionally visible to anyone watching the chain at the time of payment, although the password does not persist in the database.</p> <p>If the receiver is monitoring the chain at the time of payment and saves the password, and there is a chain reorganization that nullifies the payment, the receiver now has the password to resend the payment. This option is available so long as the channel remains open and the payment has not been refunded.</p> <p>The method returns a hex value which must then be broadcast using the <a href="#sendrawtransaction"><code>sendrawtransaction</code></a> method.</p> <p>The <code>sendrawtransaction</code> method then returns a <code>txid</code> which is the unique identifying <code>channels_tx_id</code>.</p> <h3 id="arguments-4"><a href="#arguments-4" aria-hidden="true" class="header-anchor">#</a> Arguments:</h3> <table><thead><tr><th>Structure</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>destination_pubkey</td> <td>(string)</td> <td>the public key of the intended recipient of the channel</td></tr> <tr><td>total_number_of_payments</td> <td>(number)</td> <td>the total number of payments to allocate in the channel</td></tr> <tr><td>payment_size</td> <td>(number)</td> <td>the amount per payment, given in satoshis</td></tr></tbody></table> <h3 id="response-4"><a href="#response-4" aria-hidden="true" class="header-anchor">#</a> Response:</h3> <table><thead><tr><th>Structure</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>result:</td> <td>(string)</td> <td>whether the command succeeded</td></tr> <tr><td>hex:</td> <td>(string)</td> <td>a raw transaction in hex-encoded format; you must broadcast this transaction to complete the command</td></tr></tbody></table> <h3 id="examples-4"><a href="#examples-4" aria-hidden="true" class="header-anchor">#</a> Examples:</h3> <blockquote><p>Command:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>./komodo-cli -ac_name=HELLOWORLD channelspayment 2f95b0f4e3dbe7f5ebc0f9479800c9ff3f44e76f5378313c9406ab5a92ff4631 10000000
</code></pre></div><blockquote><p>Response:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;result&quot;: &quot;success&quot;,
  &quot;hex&quot;: &quot;010000000371f8f5550a8cb53b7bdfb752687cd6aaaf1fedb4dd9414a08ee17fd3460047ed0400000049483045022100c512cbccd63871a3eee9069a90b5447a11912a7a6ccd0eeecdf40b92cd9aca2402200d7b36424e04bc77386ac3f1a030a27919d766485d5bb984234f257cc396527601ffffffff71f8f5550a8cb53b7bdfb752687cd6aaaf1fedb4dd9414a08ee17fd3460047ed00000000a74ca5a281a1a0819ca28194a067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127281400245156c5e4923c9dfbba452f4638da8ef58dc385f7511dca21d4cf87bb3fa564864d8b1f8f81742795181988f50b60bd82db618e11b432351595295eafd1c18a129a5278020e73e4b0745bdf31657ac09e3cf99fd65cb262d8498f86c977ece01b551925f028103020000af038001eba10001ffffffff71f8f5550a8cb53b7bdfb752687cd6aaaf1fedb4dd9414a08ee17fd3460047ed010000007b4c79a276a072a26ba067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba012728140be52fb33d895d684c1bd0a7cb12a735814ef7c22b89a11464215a5f80cde369765fc636153d15a8f17e7faee749b5f87ec5f88530b619586f58cc6452794517fa100af038001eba10001ffffffff060087930300000000302ea22c80206dafed6d15c24a9a60f01d5972ee08aeb40ba7849d9af3608e97397364ee16a281031210008203000401cc1027000000000000302ea22c8020c9ada2adfc6c6dec0bd9dd29f4e48c86f84c016abc3552b8815ca3c4a44c561b8103120c008203000401cc1027000000000000302ea22c802019be575785c322e9c7d2ae4b5f3df78c9a38ff7357e9e689f26de8e224cb186c8103120c008203000401cc80969800000000002321027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4acc0fb96a60100000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac0000000000000000956a4c92eb503146ff925aab06943c3178536fe7443fffc9009847f9c0ebf5e7dbe3f4b0952f210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127221027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4060000000100000000000000f676963e7537d614651bc1a3d5508243ab74e32400e4175ebceb03226b956f1a00000000&quot;
}
</code></pre></div><blockquote><p>Step 2: Broadcast using sendrawtransaction</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>./komodo-cli -ac_name=HELLOWORLD sendrawtransaction 010000000371f8f5550a8cb53b7bdfb752687cd6aaaf1fedb4dd9414a08ee17fd3460047ed0400000049483045022100c512cbccd63871a3eee9069a90b5447a11912a7a6ccd0eeecdf40b92cd9aca2402200d7b36424e04bc77386ac3f1a030a27919d766485d5bb984234f257cc396527601ffffffff71f8f5550a8cb53b7bdfb752687cd6aaaf1fedb4dd9414a08ee17fd3460047ed00000000a74ca5a281a1a0819ca28194a067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127281400245156c5e4923c9dfbba452f4638da8ef58dc385f7511dca21d4cf87bb3fa564864d8b1f8f81742795181988f50b60bd82db618e11b432351595295eafd1c18a129a5278020e73e4b0745bdf31657ac09e3cf99fd65cb262d8498f86c977ece01b551925f028103020000af038001eba10001ffffffff71f8f5550a8cb53b7bdfb752687cd6aaaf1fedb4dd9414a08ee17fd3460047ed010000007b4c79a276a072a26ba067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba012728140be52fb33d895d684c1bd0a7cb12a735814ef7c22b89a11464215a5f80cde369765fc636153d15a8f17e7faee749b5f87ec5f88530b619586f58cc6452794517fa100af038001eba10001ffffffff060087930300000000302ea22c80206dafed6d15c24a9a60f01d5972ee08aeb40ba7849d9af3608e97397364ee16a281031210008203000401cc1027000000000000302ea22c8020c9ada2adfc6c6dec0bd9dd29f4e48c86f84c016abc3552b8815ca3c4a44c561b8103120c008203000401cc1027000000000000302ea22c802019be575785c322e9c7d2ae4b5f3df78c9a38ff7357e9e689f26de8e224cb186c8103120c008203000401cc80969800000000002321027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4acc0fb96a60100000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac0000000000000000956a4c92eb503146ff925aab06943c3178536fe7443fffc9009847f9c0ebf5e7dbe3f4b0952f210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127221027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4060000000100000000000000f676963e7537d614651bc1a3d5508243ab74e32400e4175ebceb03226b956f1a00000000
</code></pre></div><blockquote><p>Response from Step 2:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>sendrawtransaction output:
36008a42bf65d62e5433ff9de72ccf3becc6d243120b2627b504bc327198bc37
</code></pre></div><blockquote><p>Check that the transaction is confirmed:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>./komodo-cli -ac_name=HELLOWORLD getrawmempool
</code></pre></div><h2 id="channelsrefund"><a href="#channelsrefund" aria-hidden="true" class="header-anchor">#</a> channelsrefund</h2> <p><strong>channelsrefund open_tx_id close_tx_id</strong></p> <p>The <code>channelsrefund</code> method withdraws funds directly to the CC address of the channel creator.</p> <p>The method can only be executed after the channel <code>close_tx_id</code> has either one notarization or 60 confirmations.</p> <p>The method returns a hex value which must then be broadcast using the <a href="#sendrawtransaction"><code>sendrawtransaction</code></a> method.</p> <h3 id="arguments-5"><a href="#arguments-5" aria-hidden="true" class="header-anchor">#</a> Arguments:</h3> <table><thead><tr><th>Structure</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>destination_pubkey</td> <td>(string)</td> <td>the public key of the intended recipient of the channel</td></tr> <tr><td>total_number_of_payments</td> <td>(number)</td> <td>the total number of payments to allocate in the channel</td></tr> <tr><td>payment_size</td> <td>(number)</td> <td>the amount per payment, given in satoshis</td></tr></tbody></table> <h3 id="response-5"><a href="#response-5" aria-hidden="true" class="header-anchor">#</a> Response:</h3> <table><thead><tr><th>Structure</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>result:</td> <td>(string)</td> <td>whether the command succeeded</td></tr> <tr><td>hex:</td> <td>(string)</td> <td>a raw transaction in hex-encoded format; you must broadcast this transaction to complete the command</td></tr></tbody></table> <h3 id="examples-5"><a href="#examples-5" aria-hidden="true" class="header-anchor">#</a> Examples:</h3> <blockquote><p>Step 1: Command</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&quot;./komodo-cli -ac_name=HELLOWORLD channelsrefund 2f95b0f4e3dbe7f5ebc0f9479800c9ff3f44e76f5378313c9406ab5a92ff4631 2079c46cd9f3970f9fd73d8022bf6f30aaf5031bf877d2c541c4c0df1dea1be5
</code></pre></div><blockquote><p>Response from Step 1:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;result&quot;: &quot;success&quot;,
  &quot;hex&quot;: &quot;0100000003e51bea1ddfc0c441c5d277f81b03f5aa306fbf22803dd79f0f97f3d96cc479200300000049483045022100bbed947e3c33b21b8519a7d78dc08cb70d3fe3e6c788119db95a459448caa64c02200a1c73431d118a7fad4f58b760b025f399747e127a46da5c421add2e599b897f01ffffffffe51bea1ddfc0c441c5d277f81b03f5aa306fbf22803dd79f0f97f3d96cc4792000000000a74ca5a281a1a0819ca28194a067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127281403fe5789a3f0e25f46a000f381fc2e7f7b759855184532a6e1e0c5e84d1dc284b4d37422735aa93175ea74d6829ac3b68a7c8c928c22b870ab4b9507bc872dbd6a129a5278020e73e4b0745bdf31657ac09e3cf99fd65cb262d8498f86c977ece01b551925f028103020000af038001eba10001ffffffffe51bea1ddfc0c441c5d277f81b03f5aa306fbf22803dd79f0f97f3d96cc47920010000007b4c79a276a072a26ba067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127281400b4d6aaeb127417839b76dc78d78379147cfff760f03824e5565aae1c371bbd34559d951cdd2e8622bd5f5aa5528d2a20ee95174c3fea09ef48824ecd647c0b2a100af038001eba10001ffffffff051027000000000000302ea22c8020c9ada2adfc6c6dec0bd9dd29f4e48c86f84c016abc3552b8815ca3c4a44c561b8103120c008203000401cc1027000000000000302ea22c802019be575785c322e9c7d2ae4b5f3df78c9a38ff7357e9e689f26de8e224cb186c8103120c008203000401cc008793030000000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac805f96a60100000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac0000000000000000956a4c92eb523146ff925aab06943c3178536fe7443fffc9009847f9c0ebf5e7dbe3f4b0952f210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127221027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4060000008096980000000000e51bea1ddfc0c441c5d277f81b03f5aa306fbf22803dd79f0f97f3d96cc4792000000000&quot;
}
</code></pre></div><blockquote><p>Step 2: Broadcast the hex using sendrawtransaction</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>./komodo-cli -ac_name=HELLOWORLD sendrawtransaction 0100000003e51bea1ddfc0c441c5d277f81b03f5aa306fbf22803dd79f0f97f3d96cc479200300000049483045022100bbed947e3c33b21b8519a7d78dc08cb70d3fe3e6c788119db95a459448caa64c02200a1c73431d118a7fad4f58b760b025f399747e127a46da5c421add2e599b897f01ffffffffe51bea1ddfc0c441c5d277f81b03f5aa306fbf22803dd79f0f97f3d96cc4792000000000a74ca5a281a1a0819ca28194a067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127281403fe5789a3f0e25f46a000f381fc2e7f7b759855184532a6e1e0c5e84d1dc284b4d37422735aa93175ea74d6829ac3b68a7c8c928c22b870ab4b9507bc872dbd6a129a5278020e73e4b0745bdf31657ac09e3cf99fd65cb262d8498f86c977ece01b551925f028103020000af038001eba10001ffffffffe51bea1ddfc0c441c5d277f81b03f5aa306fbf22803dd79f0f97f3d96cc47920010000007b4c79a276a072a26ba067a56580210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127281400b4d6aaeb127417839b76dc78d78379147cfff760f03824e5565aae1c371bbd34559d951cdd2e8622bd5f5aa5528d2a20ee95174c3fea09ef48824ecd647c0b2a100af038001eba10001ffffffff051027000000000000302ea22c8020c9ada2adfc6c6dec0bd9dd29f4e48c86f84c016abc3552b8815ca3c4a44c561b8103120c008203000401cc1027000000000000302ea22c802019be575785c322e9c7d2ae4b5f3df78c9a38ff7357e9e689f26de8e224cb186c8103120c008203000401cc008793030000000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac805f96a60100000023210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba01272ac0000000000000000956a4c92eb523146ff925aab06943c3178536fe7443fffc9009847f9c0ebf5e7dbe3f4b0952f210324f94e76159d69a5163b91588c3a04dac2c80e0011f713e3bfc5a8b67ba0127221027166e21e9579307a1ae4f8c223516e70aae3cbfab4bd6ac7cebfa625dcc0a2a4060000008096980000000000e51bea1ddfc0c441c5d277f81b03f5aa306fbf22803dd79f0f97f3d96cc4792000000000
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/komodo-docs-vuepress/010-cryptoconditions/_101-cryptoconditions-instructions.html" class="prev">
          Instructions for CryptoConditions
        </a></span> <span class="next"><a href="/komodo-docs-vuepress/010-cryptoconditions/_120-cc-dice.html">
          Dice
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/komodo-docs-vuepress/assets/js/11.726a5c6f.js" defer></script><script src="/komodo-docs-vuepress/assets/js/app.98eba040.js" defer></script>
  </body>
</html>
